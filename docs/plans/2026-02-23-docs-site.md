# GTLint Documentation Site â€” Implementation Plan

> **For Claude:** REQUIRED SUB-SKILL: Use superpowers:executing-plans to implement this plan task-by-task.

**Goal:** Create a VitePress documentation site for GTLint, deployed to GitHub Pages at `jrc03c.github.io/gtlint`.

**Architecture:** VitePress site in `docs/` directory with 6 markdown pages. GitHub Actions workflow builds and deploys on push to `main`. Content is derived from the existing README, split into focused pages.

**Tech Stack:** VitePress, GitHub Actions, GitHub Pages

---

### Task 1: Scaffold VitePress in `docs/`

**Files:**
- Modify: `pnpm-workspace.yaml` (add `docs` to workspace)
- Create: `docs/package.json`
- Create: `docs/.vitepress/config.ts`
- Create: `docs/index.md` (placeholder)

**Step 1: Add `docs` to pnpm workspace**

In `pnpm-workspace.yaml`, add `docs` to the packages list:

```yaml
packages:
  - .
  - vscode-extension
  - docs
```

**Step 2: Initialize `docs/package.json`**

Create `docs/package.json`:

```json
{
  "name": "gtlint-docs",
  "private": true,
  "type": "module",
  "scripts": {
    "dev": "vitepress dev",
    "build": "vitepress build",
    "preview": "vitepress preview"
  },
  "devDependencies": {
    "vitepress": "^1.6.3"
  }
}
```

**Step 3: Install dependencies**

Run: `cd /home/josh/storage/work/gtlint && pnpm install`
Expected: VitePress installed, lockfile updated.

**Step 4: Create VitePress config**

Create `docs/.vitepress/config.ts`:

```ts
import { defineConfig } from "vitepress"

export default defineConfig({
  title: "GTLint",
  description: "A linter and formatter for the GuidedTrack language",
  base: "/gtlint/",

  head: [
    // Use the VitePress logo as favicon placeholder; can be replaced later
  ],

  themeConfig: {
    nav: [
      { text: "Guide", link: "/getting-started" },
      { text: "GitHub", link: "https://github.com/jrc03c/gtlint" },
    ],

    sidebar: [
      {
        text: "Guide",
        items: [
          { text: "Getting Started", link: "/getting-started" },
          { text: "Rules", link: "/rules" },
          { text: "Formatter", link: "/formatter" },
          { text: "Configuration", link: "/configuration" },
          { text: "Directives", link: "/directives" },
        ],
      },
    ],

    socialLinks: [
      { icon: "github", link: "https://github.com/jrc03c/gtlint" },
    ],

    search: {
      provider: "local",
    },

    footer: {
      message: "Released under the MIT License.",
    },
  },
})
```

**Step 5: Create placeholder home page**

Create `docs/index.md`:

```markdown
---
layout: home

hero:
  name: GTLint
  text: Linter & Formatter for GuidedTrack
  tagline: Catch errors and format code in GuidedTrack programs
  actions:
    - theme: brand
      text: Get Started
      link: /getting-started
    - theme: alt
      text: View on GitHub
      link: https://github.com/jrc03c/gtlint

features:
  - title: Linter
    details: Catches undefined variables, invalid keywords, unreachable code, and more.
  - title: Formatter
    details: Normalizes spacing, trims whitespace, and formats operators automatically.
  - title: VSCode Extension
    details: Lint while you type and format on save, right in your editor.
---
```

**Step 6: Verify VitePress builds**

Run: `cd /home/josh/storage/work/gtlint/docs && pnpm run build`
Expected: Build completes, output in `docs/.vitepress/dist/`.

**Step 7: Add build output to `.gitignore`**

Append to `/home/josh/storage/work/gtlint/.gitignore`:

```
docs/.vitepress/dist/
docs/.vitepress/cache/
```

**Step 8: Commit**

```bash
git add pnpm-workspace.yaml docs/package.json docs/.vitepress/config.ts docs/index.md pnpm-lock.yaml .gitignore
git commit -m "scaffold VitePress docs site"
```

---

### Task 2: Write Getting Started page

**Files:**
- Create: `docs/getting-started.md`

**Step 1: Write the page**

Content derived from README sections "VSCode extension" and "Command Line". Include:

- VSCode installation (download `.vsix`, install via command palette)
- CLI installation (`npm install` local and global)
- Basic usage for both (lint, format commands)

Use the same structure as the README but written as a focused guide with VitePress formatting.

**Step 2: Verify it renders**

Run: `cd /home/josh/storage/work/gtlint/docs && pnpm run build`
Expected: Build succeeds.

**Step 3: Commit**

```bash
git add docs/getting-started.md
git commit -m "add Getting Started docs page"
```

---

### Task 3: Write Rules page

**Files:**
- Create: `docs/rules.md`

**Step 1: Write the page**

Include a table of all 19 lint rules with columns: Rule, Description, Default Severity. The rules and their defaults come from the README's configuration section. Group or list them in a logical order.

Rules to document (all from `src/linter/rules/`):

| Rule | Default | Description |
|------|---------|-------------|
| `correctIndentation` | error | Incorrect indentation levels |
| `gotoNeedsResetInEvents` | warn | `*goto` in event handlers should use `*reset` |
| `indentStyle` | error | Spaces instead of tabs for indentation |
| `noDuplicateLabels` | error | Duplicate label names |
| `noEmptyBlocks` | error | Empty keyword blocks |
| `noInlineArgument` | error | Invalid inline arguments on keywords |
| `noInvalidGoto` | error | Nonexistent goto labels |
| `noSingleQuotes` | error | Single quotes instead of double quotes |
| `noUnclosedBracket` | error | Unclosed brackets |
| `noUnclosedString` | error | Unclosed strings |
| `noUndefinedVars` | error | Undefined variables |
| `noUnreachableCode` | warn | Unreachable code |
| `noUnusedLabels` | warn | Unused labels |
| `noUnusedVars` | warn | Unused variables |
| `purchaseSubkeywordConstraints` | error | Purchase sub-keyword constraint violations |
| `requiredSubkeywords` | error | Missing required sub-keywords |
| `validKeyword` | error | Unrecognized keywords |
| `validSubKeyword` | error | Invalid sub-keywords |
| `validSubkeywordValue` | error | Invalid sub-keyword values |

Include a section explaining severity levels (`error`, `warn`, `off`) and how to configure them.

**Step 2: Verify build**

Run: `cd /home/josh/storage/work/gtlint/docs && pnpm run build`
Expected: Build succeeds.

**Step 3: Commit**

```bash
git add docs/rules.md
git commit -m "add Rules reference docs page"
```

---

### Task 4: Write Formatter page

**Files:**
- Create: `docs/formatter.md`

**Step 1: Write the page**

Content derived from README "Formatter" section. Document each formatter behavior:

- Trims trailing whitespace
- Collapses consecutive empty lines
- Adds spaces around operators
- Adds spaces around arrows (`->`)
- Adds spaces after commas
- Normalizes spacing inside braces, brackets, parens
- Normalizes `>>` spacing
- Collapses runs of whitespace in expressions

For each, explain what it does and show the corresponding config option from the `format` block.

**Step 2: Verify build**

Run: `cd /home/josh/storage/work/gtlint/docs && pnpm run build`
Expected: Build succeeds.

**Step 3: Commit**

```bash
git add docs/formatter.md
git commit -m "add Formatter reference docs page"
```

---

### Task 5: Write Configuration page

**Files:**
- Create: `docs/configuration.md`

**Step 1: Write the page**

Content derived from README "Configuration" section. Include:

- How to create `gtlint.config.js`
- Full example config with all default values (from README)
- Explanation of lint rule severity values (`"error"`, `"warn"`, `"off"`, and numeric equivalents)
- Explanation of each formatter config option
- Note about camelCase in config files vs kebab-case in directives

**Step 2: Verify build**

Run: `cd /home/josh/storage/work/gtlint/docs && pnpm run build`
Expected: Build succeeds.

**Step 3: Commit**

```bash
git add docs/configuration.md
git commit -m "add Configuration reference docs page"
```

---

### Task 6: Write Directives page

**Files:**
- Create: `docs/directives.md`

**Step 1: Write the page**

Content derived from README "Directives" section. Organize by category:

1. **Combined (lint + format):** `@gt-disable`, `@gt-enable`, `@gt-disable-next-line`
2. **Lint-only:** `@gtlint-disable`, `@gtlint-enable`, `@gtlint-disable-next-line`, `@from-child`, `@from-parent`, `@from-url`, `@to-child`, `@to-parent`, `@to-csv`
3. **Format-only:** `@gtformat-disable`, `@gtformat-enable`

Include examples for each directive. Note that directive rule names use kebab-case.

**Step 2: Verify build**

Run: `cd /home/josh/storage/work/gtlint/docs && pnpm run build`
Expected: Build succeeds.

**Step 3: Commit**

```bash
git add docs/directives.md
git commit -m "add Directives reference docs page"
```

---

### Task 7: Add GitHub Actions deploy workflow

**Files:**
- Create: `.github/workflows/docs.yml`

**Step 1: Write the workflow**

Create `.github/workflows/docs.yml`:

```yaml
name: Deploy Docs

on:
  push:
    branches: [main]
    paths:
      - "docs/**"
      - ".github/workflows/docs.yml"
  workflow_dispatch:

permissions:
  contents: read
  pages: write
  id-token: write

concurrency:
  group: pages
  cancel-in-progress: false

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4

      - uses: pnpm/action-setup@v4

      - uses: actions/setup-node@v4
        with:
          node-version: 20
          cache: pnpm

      - run: pnpm install --frozen-lockfile

      - run: cd docs && pnpm run build

      - uses: actions/upload-pages-artifact@v3
        with:
          path: docs/.vitepress/dist

  deploy:
    needs: build
    runs-on: ubuntu-latest
    environment:
      name: github-pages
      url: ${{ steps.deployment.outputs.page_url }}
    steps:
      - id: deployment
        uses: actions/deploy-pages@v4
```

**Step 2: Commit**

```bash
git add .github/workflows/docs.yml
git commit -m "add GitHub Actions workflow for docs deployment"
```

---

### Task 8: Final verification and local preview

**Step 1: Full build**

Run: `cd /home/josh/storage/work/gtlint/docs && pnpm run build`
Expected: Build succeeds with no warnings.

**Step 2: Local preview**

Run: `cd /home/josh/storage/work/gtlint/docs && pnpm run preview`
Expected: Local server starts. Verify all pages render, sidebar navigation works, search works.

**Step 3: Verify all links**

Check that:
- Home page hero links work
- Sidebar navigation hits all 5 pages
- GitHub links point to correct repo
- No broken internal links

**Step 4: Final commit if any fixes needed**

---

### Post-Implementation Notes

After pushing to `main`:
1. Go to GitHub repo Settings > Pages
2. Set source to "GitHub Actions"
3. The `docs.yml` workflow will deploy on the next push to `main` that touches `docs/`
4. Site will be live at `https://jrc03c.github.io/gtlint/`
